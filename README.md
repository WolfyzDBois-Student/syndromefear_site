
# SyndromeFear — Astro Static Site

This is a static site built with [Astro](https://astro.build/) and TailwindCSS.

It supports:
- Deployment to **GitHub Pages** via SSH and GitHub Actions
- Local or VPS deployment with **Docker**
- Easy local development setup

---

## 1. Deploy to your own GitHub Pages repo

### Step 1: Fork or clone this repository

Make sure your Astro project is stored in its own repository (e.g. `yourname/yourastrorepo`) and create a second repository (e.g. `yourname/yourastrorepo_site`) to host the static output on the `gh-pages` branch.

### Step 2: Update `astro.config.mjs`

```js
export default defineConfig({
  site: 'https://yourname.github.io/yourastrorepo_site/',
  base: '/yourastrorepo_site/',
});
````

### Step 3: Generate SSH Deploy Key

Run in your terminal:

```bash
ssh-keygen -t ed25519 -C "gh-pages-deploy" -f deploy_key
```

This generates two files:

* `deploy_key` (private) — do **not** push it to GitHub
* `deploy_key.pub` (public)

### Step 4: Configure GitHub

#### On the repo `yourastrorepo_site`:

* Go to Settings → Deploy keys → Add key

  * Paste `deploy_key.pub`
  * Enable **write access**

#### On the repo `yourastrorepo` (the code one):

* Go to Settings → Secrets → Actions → New repository secret

  * Name: `DEPLOY_KEY`
  * Value: paste content of `deploy_key` (private key)

### Step 5: GitHub Actions

Ensure your workflow file `.github/workflows/deploy.yml` looks like:

```yaml
- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    deploy_key: ${{ secrets.DEPLOY_KEY }}
    external_repository: yourname/yourastrorepo_site
    publish_branch: gh-pages
    publish_dir: ./dist
```

Then push to `main`. GitHub will automatically build and deploy the site.

---

## 2. Build and serve the site on a VPS using Docker

### Prerequisites

* Docker and Docker Compose installed
* Git access to the project

### Build and run:

```bash
./scripts/docker.sh
```

This script:

* Builds the Docker image
* Runs `astro build`
* Serves the `dist/` folder with `astro preview`
* Exposes the site on `http://localhost:4321/syndromefear/`

Make sure your `astro.config.mjs` includes:

```js
export default defineConfig({
  base: '/syndromefear/',
  site: 'http://your-vps-domain-or-ip/syndromefear/',
});
```

---

## 3. Local development setup

Clone the project and run:

```bash
./scripts/init.sh     # Installs dependencies
./scripts/dev.sh      # Starts the dev server on http://localhost:4321/syndromefear/
```

If you don’t use the scripts:

```bash
npm install
npm run dev -- --host
```

---

## Folder structure

```
src/
├── pages/             # Each page corresponds to a route
├── components/        # Reusable UI components
├── layouts/           # Shared page templates
└── styles/            # Tailwind and custom CSS

public/                # Static assets (favicon, images, etc.)
dist/                  # Astro output (generated by build)
scripts/               # Shell utilities (build, dev, docker, deploy)
```


